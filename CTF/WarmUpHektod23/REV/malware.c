#include <stdio.h>
#include <string.h>

void encrypt(char *buf, int rot){
    int n = strlen(buf);
    for(int i = 0; i < n; i++) {
        if( buf[i] >= 65 && buf[i] <= 90) {
            buf[i] = (buf[i] - 65 + rot) % 26 + 65;
        }
        else if (buf[i] >= 97 && buf[i] <= 122) {
            buf[i] = (buf[i] - 97 + rot) % 26 + 97;
        }
    }
}


int main (int argc, char *argv[]) {
    FILE *ptr;
    char string[2048] = {0};

    ptr = fopen(argv[1], "r");
    fread(string, 2048, 1, ptr);
    fclose(ptr);

    remove(argv[1]);

    ptr = fopen(strcat(argv[1], ".hack"), "w");
    encrypt(string, 13);
    fprintf(ptr, string);
    fclose(ptr);

    return 0;
}